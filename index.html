<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>サンプルページ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/d60d03627c.js" crossorigin="anonymous"></script>
  </head>
  <body>

    <div class="box box1">box1</div>
    <div class="box box2">box2</div>
    <div class="box box3">box3</div>
    <div class="box box4">box4</div>

    <button id="toTop" class="hideBtn"><i class="fas fa-angle-up"></i></button>

    <script>
      window.addEventListener('scroll', () => {
        const offset = window.pageYOffset;
        const toTop = document.getElementById('toTop');

        if (offset > 300) {
          toTop.classList.remove('hideBtn');
          toTop.classList.add('showBtn');
        } else {
          toTop.classList.remove('showBtn');
          toTop.classList.add('hideBtn');
        }
      });

      scrollTop('toTop', 300);

      function scrollTop(element, duration) {
        const target = document.getElementById(element);

        target.addEventListener('click', function() {
          let currentY = window.pageYOffset;
          let step = duration / currentY > 1 ? 10 : 100;
          let timeStep = duration / currentY * step;
          let intervalId = setInterval(scrollUp, timeStep);

          function scrollUp() {
            currentY = window.pageYOffset;
            if (currentY === 0) {
              clearInterval(intervalId);
            } else {
              scrollBy(0, -step);
            }
          }
        });
      }
    </script>
  </body>
</html>
